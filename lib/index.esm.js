/*!
* tMind-Svr v1.0.5
* (c) 2021-2022  Smpoo soft Co. Shanghai China
* Released under the MIT License.
* Author: David
* CreateDate: 2021-03-05
* LastBuild: 2021-08-08 05:09:20
*/
/*!
* tMind-Cli v2.3.15
* (c) 2021-2022  Smpoo soft Co. Shanghai China
* Released under the MIT License.
* Author: David
* CreateDate: 2021-03-05
* LastBuild: 2021-08-08 02:40:32
*/
const t=["ä¸‡","äº¿","å…†","äº¬","åž“","æ¼","ç©°","æ²Ÿ","æ¶§","æ­£"],r=["é›¶","å£¹","è´°","å","è‚†","ä¼","é™†","æŸ’","æŒ","çŽ–"],e=["å…ƒ","æ‹¾","ä½°","ä»Ÿ","ä¸‡","æ‹¾","ä½°","ä»Ÿ","äº¿","æ‹¾","ä½°","ä»Ÿ","å…†","æ‹¾","ä½°","ä»Ÿ","äº¬","æ‹¾","ä½°","ä»Ÿ","åž“","æ‹¾","ä½°","ä»Ÿ","æ¼","æ‹¾","ä½°","ä»Ÿ","ç©°","æ‹¾","ä½°","ä»Ÿ","æ²Ÿ","æ‹¾","ä½°","ä»Ÿ","æ¶§","æ‹¾","ä½°","ä»Ÿ","æ­£","æ‹¾","ä½°","ä»Ÿ"],n=function(t,r){return Intl.NumberFormat("cmn-Hans-CN",{style:"currency",currency:r}).format(t)},o=function(t,r){return Intl.NumberFormat("en-US",{maximumFractionDigits:void 0===r?2:r}).format(2334.338922)},i=function(t){return`${t}`.split(".")},s=function(t,r,e){const n=r??2;switch(e??"normal"){case"bank":return+t.toFixed(n);case"carry":return+`${t}`.split(".")[0]+1;case"drop":return+`${t}`.split(".")[0];default:const r=10**n,[e,o]=(""+t*r).split(".");let i=+e;return o&&+o.slice(0,1)>4&&(i+=1),i/r}},c=function(n){const o=["è§’","åˆ†","åŽ˜","æ¯«","ä¸"],[i,s]=`${n}`.split(".");if(i.length>e.length)return"é‡‘é¢è¶…å‡ºæœ‰æ•ˆèŒƒå›´ï¼Œæ— æ³•æ˜¾ç¤ºå¤§å†™";const c=[],a=[];if(i.split("").reverse().forEach(((n,o)=>{const i=e[o],s=`${r[+n]}${"0"!==n||t.includes(i)?i:""}`;c.push(s)})),s&&s.length){const t=s.split("").slice(0,o.length),e=[];t.forEach(((t,n)=>{e.push(`${r[+t]}${o[n]}`)})),a.push(e.join(""))}else a.push("æ•´");return[c.reverse().join("").replace(new RegExp(t.map((t=>`(é›¶+${t})`)).join("|"),"g"),(t=>t.replace(/é›¶+/g,""))).replace(/é›¶+/g,"é›¶"),a.join("")].join("")},a=function(t){return!(0==(1&t))};var u;function p(t,r,...e){if(r){if(r===t.length)t.push(...e);else if(r>0){const n=t.splice(0,r);t.unshift(...e),t.unshift(...n)}}else t.unshift(...e)}function l(t,r,e,n,o){if(function(t){return`${Object.prototype.toString.call(t).replace(/\[object\s|\]/g,"").toLowerCase()}`}(t[0])===u.object)r>e?function(t,r,e,n,o){const[i,s]=[e,r],[c,a]=[r,r+n];for(let r=i;r<s;r++){const e=t[r];e[o]=(+e[o]||r)+n}for(let n=c;n<a;n++){const i=t[n];i[o]=(+i[o]||n)-(r-e)}}(t,r,e,n,o):r<e&&function(t,r,e,n,o){const[i,s]=[r,r+n],[c,a]=[r+n,e+n],u=e-r;for(let r=i;r<s;r++){const e=t[r];e[o]=(e[o]||r)+u}for(let r=c;r<a;r++){const e=t[r],i=(e[o]||r)-n;e[o]=i}}(t,r,e,n,o);else{const o=t.splice(r,n);r<e?p(t,e-n,...o):r>e&&p(t,e,...o)}}!function(t){t.arguments="arguments",t.array="array",t.arraybuffer="arraybuffer",t.boolean="boolean",t.date="date",t.dataview="dataview",t.error="error",t.float32array="float32array",t.float64array="float64array",t.function="function",t.int16array="int16array",t.int32array="int32array",t.int8array="int8array",t.map="map",t.number="number",t.object="object",t.regexp="regexp",t.set="set",t.string="string",t.symbol="symbol",t.uint16array="uint16array",t.uint32array="uint32array",t.uint8array="uint8array",t.uint8clampedarray="uint8clampedarray",t.weakmap="weakmap",t.weakref="weakref",t.weakset="weakset"}(u||(u={}));const h=t=>t.split("").map((t=>t.charCodeAt(0))),f=(t,r)=>String.fromCharCode(...Array.isArray(t)?t:t.split(r||"-").map((t=>+t))),m={toUniCode:h,wechatNick:function(t){return h(t).join("-")}},g={toStr:f,wechatNick:function(t){return f(t,"-")}};class y{}y.inBrowser=!!globalThis.window,y.inSvr=!!globalThis.process,y.NUM_TO_STR=["é›¶","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å"],y.sort={sortASC:function(t,r){return"string"==typeof t?t.localeCompare(`${r}`):"number"==typeof t&&"number"==typeof r?t-r:0},sortDESC:function(t,r){return"string"==typeof t?`${r}`.localeCompare(t):"number"==typeof t&&"number"==typeof r?r-t:0}},y.encode=m,y.decode=g;const d=["[30m","[39m"],N=["[34m","[39m"],b=["[32m","[39m"],$=["[33m","[39m"],S=["[31m","[39m"],w=["[44m","[49m"],v=["[104m","[49m"],C=["[42;30m","[49m"],O=["[102m","[49m"],R=["[43;30m","[49m"],k=["[103m","[49m"],A=["[41m","[49m"],E=["[105m","[49m"],j=["[0m"],x={INFO:["ä¿¡æ¯",w[0],w[1],N[0],N[1],j[0]],SUCC:["æˆåŠŸ",C[0],C[1],b[0],b[1],j[0]],WARN:["è­¦å‘Š",R[0],R[1],$[0],$[1],j[0]],ERR:["é”™è¯¯",A[0],A[1],S[0],S[1],j[0]]},T={INFO:["ä¿¡æ¯",v[0],v[1],d[0],d[1]],SUCC:["æˆåŠŸ",O[0],O[1],d[0],d[1]],WARN:["è­¦å‘Š",k[0],k[1],d[0],d[1]],ERR:["é”™è¯¯",E[0],E[1],S[0],S[1]]};function F(t,r,e){const n=`${e}`.toUpperCase(),o=(t,r)=>t(r),i=typeof t,[s,c,a,u,p]=y.inBrowser?T[n]||["","","","",""]:x[n]||["","","","",""];if("string"===i){const n=`${c} ${r||s} ${a} ${u} ${t} ${p}`;o(e&&("ERR"===e&&console.error||"WARN"===e&&console.warn||console.log)||console.log,n)}else t instanceof Error?o(console.error,`${c} ${r||s} ${a} ${u} ${t} ${p}`):"object"===i&&console.log(JSON.stringify(t),null,2)}String.prototype.len=function(){return this.length},String.prototype.lenfrom0=function(){return this.length,this.length-1},String.prototype.left=function(t){return(this||"").slice(0,t)},String.prototype.right=function(t){return(this||"").slice(-1*t)},String.prototype.mid=function(t,r){return r>0?(this||"").slice(t,t+r):r<0?(this||"").slice(t,r):""},String.prototype.like=function(t){return"num2"===t?/^[0-1]*$/.test(`${this}`):"num8"===t?/^[0-7]*$/.test(`${this}`):"num16"===t?/^[0-9a-fA-F]*$/.test(`${this}`):"num26"===t?/^[a-zA-Z]*$/.test(`${this}`):/^[0-9]*$/.test(`${this}`)},String.prototype.upFirst=function(){return this.replace(/^(\w)/,((t,r)=>t.toUpperCase()))},String.prototype.camelCase=function(){return this.replace(/[-|_|\s+](\w)/g,((t,r)=>r.toUpperCase()))},String.prototype.toObj=function(){const t=this;if(!t)return{gotNull:"The original paramter shouldn't be a empty string."};try{return JSON.parse(t)}catch(t){return{gotWrong:"The original paramter isn't a correct json like string."}}},String.prototype.encodeToUniCode=function(){return m.toUniCode(this.valueOf())},String.prototype.encodeFromWechatNick=function(){return m.wechatNick(this.valueOf())},String.prototype.decodeToStr=function(t){return g.toStr(this.valueOf(),t||"-")},String.prototype.decodeToWechatNick=function(){return g.wechatNick(this.valueOf())},Number.prototype.toPrice=function(t="CNY"){return n.call(this,this.valueOf(),t)},Number.prototype.toSplit=function(t){return o.call(this,this.valueOf(),t)},Number.prototype.toArr=function(){return i.call(this,this.valueOf())},Number.prototype.toRound=function(t,r){return s.call(this,this.valueOf(),t,r)},Number.prototype.toCNY=function(){return c.call(this,this.valueOf())},Number.prototype.isOdd=function(){return a.call(this,this.valueOf())},Number.prototype.funcAdd=function(...t){return((...t)=>{try{return t.reduce(((t,r)=>t+1e6*+r),0)/1e6}catch(t){return NaN}})(this.valueOf(),...t)},Number.prototype.funcSub=function(...t){return((...t)=>{try{const[r,...e]=t;return e.reduce(((t,r)=>t-1e6*+r),1e6*+r)/1e6}catch(t){return NaN}})(this.valueOf(),...t)},Number.prototype.funcMult=function(...t){return((...t)=>{try{return t.reduce(((t,r)=>t*+r*1e6),1)/1e6**t.length}catch(t){return NaN}})(this.valueOf(),...t)},Number.prototype.funcDiv=function(...t){return((...t)=>{try{const[r,...e]=t;return e.includes(0)?NaN:e.reduce(((t,r)=>t/(1e6*r)),1e6*+r)}catch(t){return NaN}})(this.valueOf(),...t)},Array.prototype.insertTo=function(t=1,...r){p.call(this,this,t,...r)},Array.prototype.moveTo=function(t,r,e=1,n="orderIdx"){l.call(this,this,t,r,e,n)},Array.prototype.decodeToStr=function(){return g.toStr(this,"")};const q=y;q.inBrowser?(console.clear(),console.log(String.fromCharCode(..."32-32-32-32-32-32-95-95-95-32-32-32-32-32-32-32-32-32-32-32-95-95-95-32-32-32-32-32-32-32-32-32-32-32-95-95-95-32-32-32-32-32-32-32-32-32-32-32-95-95-95-32-32-32-32-32-32-32-32-32-32-32-95-95-95-32-32-32-32-32-10-32-32-32-32-32-47-92-32-32-92-32-32-32-32-32-32-32-32-32-47-92-95-95-92-32-32-32-32-32-32-32-32-32-47-92-32-32-92-32-32-32-32-32-32-32-32-32-47-92-32-32-92-32-32-32-32-32-32-32-32-32-47-92-32-32-92-32-32-32-32-10-32-32-32-32-47-58-58-92-32-32-92-32-32-32-32-32-32-32-47-58-58-124-32-32-124-32-32-32-32-32-32-32-47-58-58-92-32-32-92-32-32-32-32-32-32-32-47-58-58-92-32-32-92-32-32-32-32-32-32-32-47-58-58-92-32-32-92-32-32-32-10-32-32-32-47-58-47-92-32-92-32-32-92-32-32-32-32-32-47-58-124-58-124-32-32-124-32-32-32-32-32-32-47-58-47-92-58-92-32-32-92-32-32-32-32-32-47-58-47-92-58-92-32-32-92-32-32-32-32-32-47-58-47-92-58-92-32-32-92-32-32-10-32-32-95-92-58-92-45-92-32-92-32-32-92-32-32-32-47-58-47-124-58-124-95-95-124-95-95-32-32-32-47-58-58-92-45-92-58-92-32-32-92-32-32-32-47-58-47-32-32-92-58-92-32-32-92-32-32-32-47-58-47-32-32-92-58-92-32-32-92-32-10-32-47-92-32-92-58-92-32-92-32-92-95-95-92-32-47-58-47-32-124-58-58-58-58-92-95-95-92-32-47-58-47-92-58-92-32-92-58-92-95-95-92-32-47-58-47-95-95-47-32-92-58-92-95-95-92-32-47-58-47-95-95-47-32-92-58-92-95-95-92-32-10-32-92-58-92-32-92-58-92-32-92-47-95-95-47-32-92-47-95-95-47-45-45-47-58-47-32-32-47-32-92-47-95-95-92-58-92-47-58-47-32-32-47-32-92-58-92-32-32-92-32-47-58-47-32-32-47-32-92-58-92-32-32-92-32-47-58-47-32-32-47-32-10-32-32-92-58-92-32-92-58-92-95-95-92-32-32-32-32-32-32-32-32-32-47-58-47-32-32-47-32-32-32-32-32-32-32-92-58-58-47-32-32-47-32-32-32-92-58-92-32-32-47-58-47-32-32-47-32-32-32-92-58-92-32-32-47-58-47-32-32-47-32-10-32-32-32-92-58-92-47-58-47-32-32-47-32-32-32-32-32-32-32-32-47-58-47-32-32-47-32-32-32-32-32-32-32-32-32-92-47-95-95-47-32-32-32-32-32-92-58-92-47-58-47-32-32-47-32-32-32-32-32-92-58-92-47-58-47-32-32-47-32-32-10-32-32-32-32-92-58-58-47-32-32-47-32-32-32-32-32-32-32-32-47-58-47-32-32-47-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-92-58-58-47-32-32-47-32-32-32-32-32-32-32-92-58-58-47-32-32-47-32-32-32-10-32-32-32-32-32-92-47-95-95-47-32-32-32-32-32-32-32-32-32-92-47-95-95-47-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-92-47-95-95-47-32-32-32-32-32-32-32-32-32-92-47-95-95-47-32-32-32-32-10-10-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-32-19978-28023-28145-26222-36719-20214-26377-38480-20844-21496-32-45-32-119-119-119-46-115-109-112-111-111-46-99-111-109".split("-").map((t=>+t)))),window.onerror=function(t,r,e){return!1}):q.inSvr&&process.on("uncaughtException",(function(t){F(t,"æœªå¤„ç†çš„å¼‚å¸¸","ERR")}));const U=F;class M extends Error{constructor(t,r,e){super("string"==typeof t?t:t.message);const n="boolean"==typeof r;this.code=r?n?1e4:r:1e4,(n||e)&&U("string"==typeof t?t:t.message,"å¼‚å¸¸","ERR")}}const W=require("events"),P=require("./PathMgr"),I=require("./preConf"),D=require("./bootWelcome"),H=require("request-promise");class z extends W{constructor(t){super(),this.#pathMgr=new P(t),this.#ident=this.#pathMgr.svrForlder,this.#config=I(this.#pathMgr),this.#isPause=!1,this.#isHttps=!!this.#config.cert.key,this.on("error",(t=>{this.echo("ç›‘å¬åˆ°å¼‚å¸¸ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š","é”™è¯¯","ERR"),this.echo(t)}))}#ident;#pathMgr;#config;#isPause;#isHttps;get pathMgr(){return this.#pathMgr||{}}get config(){return this.#config.unit[this.#ident]||{}}get configAll(){return this.#config||{}}get status(){return this.#isPause}echo(t,r,e){const n=t instanceof Error;r?U(t,r,e):n?console.error(t):console.log(t)}start(){try{D(this.#isHttps,this.config.port,this.config.namezh)}catch(t){this.echo(t.message,"å¯åŠ¨å¤±è´¥"),this.echo(t),process.exit(1)}}stop(t){U(t||"å·²åœæ­¢æœåŠ¡ç«¯","æ‰‹åŠ¨","WARN"),process.exit(0)}pause(){this.#isPause=!0,this.echo("æœåŠ¡å·²æš‚åœ","è­¦å‘Šï¼","WARN")}resume(){this.#isPause=!1,this.echo("æœåŠ¡å·²æ¢å¤","ä¿¡æ¯","INFO")}exit(t,r){U(t||`[${this.config.namezh}]æœåŠ¡ç«¯æ— æ³•å¯åŠ¨`,"å¯åŠ¨å¼‚å¸¸","ERR"),process.exit(r??1)}async http(t,r){const e="string"==typeof t,n=r&&"object"!=typeof r,o={uri:e&&t||t.uri,json:!0},i=!e&&t?.qs||!n&&r?.qs,s=!e&&t?.headers||!n&&r?.headers,c=n&&r||!e&&t?.method||"GET";i&&(o.qs=i),s&&(o.headers=s),c&&"GET"!==c&&(o.method=c);try{return await H(o)}catch(t){this.emit("error",new M(t,10005,!0))}}}const B=require("koa");var _={KoaSvr:class extends z{constructor(t){super(t),this.#app=new B,this.#app.use((async(t,r)=>{t.body="æµ‹è¯•",await r()}))}#app;start(){this.#app.listen(super.config.port),super.start()}},DbSvr:class{}};export default _;
